<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KazandÄ±ran FinansÃ§Ä± - Pro Volatilite</title>
    <style>
        /* CSS Kodu - AYNI */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0d1e3a; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #fff;
        }
        .oyun-container {
            width: 800px;
            max-width: 95%;
            background-color: #0f274a;
            border: 4px solid #1e90ff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(30, 144, 255, 0.5);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #1e90ff;
        }
        .title {
            font-size: 32px;
            font-weight: bold;
            color: #00ff7f;
            text-shadow: 0 0 5px #00ff7f;
        }
        .bakiye {
            font-size: 24px;
            color: #fff;
            background-color: #0f274a;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #1e90ff;
        }

        .grafik-alani {
            position: relative;
            height: 350px;
            background-color: #0a1728;
            border: 2px solid #00ff7f;
            border-radius: 8px;
            margin-bottom: 20px;
            background-image: 
                linear-gradient(rgba(26, 61, 109, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(26, 61, 109, 0.3) 1px, transparent 1px);
            background-size: 40px 40px;
            overflow: hidden;
        }
        
        .carpan-gosterge {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 56px;
            font-weight: 800;
            color: #00ff7f;
            text-shadow: 0 0 20px rgba(0, 255, 127, 0.4);
            z-index: 10;
            background-color: rgba(10, 23, 40, 0.7);
            padding: 5px 20px;
            border-radius: 10px;
            border: 1px solid #1e90ff;
            font-variant-numeric: tabular-nums;
        }
        .carpan-gosterge.dusuyor { color: #ffaa00; text-shadow: 0 0 20px rgba(255, 170, 0, 0.4); }
        .carpan-gosterge.crash { color: #ff4d4d; text-shadow: 0 0 20px rgba(255, 77, 77, 0.6); }

        #grafikCanvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        .kontrol-paneli {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .hiz-ayarlari {
            grid-column: 1 / span 3;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .hiz-ayarlari button {
            background-color: #1e3d6d;
            color: #fff;
            padding: 8px 15px;
            border: 1px solid #1e90ff;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .hiz-ayarlari button:hover { background-color: #1a5c96; }
        .hiz-ayarlari .aktif { background-color: #1e90ff; border-color: #fff; font-weight: bold; }

        .sonuclar-alani {
            background-color: #0a1728;
            border: 2px solid #1e90ff;
            border-radius: 5px;
            padding: 10px;
            height: 150px;
            overflow-y: auto;
        }
        .sonuclar-liste { display: flex; flex-wrap: wrap; gap: 5px; }
        .sonuc-item {
            background-color: #4b0082;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: bold;
        }
        .sonuc-item.kayip { background-color: #3d0d0d; color: #ff6666; border: 1px solid #ff4d4d; }
        .sonuc-item.kazanc { background-color: #0d3d1e; color: #66ff99; border: 1px solid #00ff7f; }

        .bahis-kontrol { display: flex; flex-direction: column; gap: 8px; }
        .bahis-butonlari { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
        .bahis-butonlari button {
            background-color: #333; color: #fff; padding: 10px 0; border: 1px solid #666; border-radius: 5px; cursor: pointer;
        }
        .bahis-secim { display: flex; gap: 5px; }
        .bahis-secim button {
            flex-grow: 1; padding: 10px 0; font-size: 16px; background-color: #1e3d6d; border: 1px solid #1e90ff; color: #fff; border-radius: 5px; cursor: pointer;
        }

        .oyun-butonlari { display: flex; flex-direction: column; gap: 8px; }
        #oynaToplaBtn {
            background-color: #00cc66; color: white; padding: 20px; border: none; border-radius: 8px; font-size: 24px; font-weight: bold; cursor: pointer; box-shadow: 0 5px #00994d;
        }
        #oynaToplaBtn:active { box-shadow: 0 2px #00994d; transform: translateY(3px); }
        #oynaToplaBtn.topla-modu { background-color: #ffaa00; box-shadow: 0 5px #cc8800; }
        #oynaToplaBtn.topla-modu:active { box-shadow: 0 2px #cc8800; }

        .oto-strateji { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        #otoStratejiSwitch {
            width: 60px; height: 30px; background-color: #333; border-radius: 15px; position: relative; cursor: pointer;
        }
        #otoStratejiSwitch.on { background-color: #1e90ff; }
        #otoStratejiSwitch .slider {
            width: 26px; height: 26px; background-color: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: transform 0.4s;
        }
        #otoStratejiSwitch.on .slider { transform: translateX(30px); }
        .not { grid-column: 1 / span 3; font-size: 11px; color: #8899aa; text-align: center; margin-top: 5px; }
    </style>
</head>
<body>

<div class="oyun-container">
    <div class="header">
        <div class="title">ðŸš€ KAZANDIRAN FÄ°NANSÃ‡I</div>
        <div class="bakiye" id="bakiyeGosterge">â‚º100.00</div>
    </div>

    <div class="grafik-alani">
        <div class="carpan-gosterge" id="carpanGosterge">1.00x</div>
        <canvas id="grafikCanvas"></canvas>
    </div>

    <div class="hiz-ayarlari">
        <span style="font-weight: bold;">HIZ:</span>
        <button onclick="setHiz(0.5)">0.50x</button>
        <button class="aktif" onclick="setHiz(1.0)">1.00x</button>
        <button onclick="setHiz(2.0)">2.00x</button>
        <button onclick="setHiz(5.0)">5.00x</button>
    </div>

    <div class="kontrol-paneli">
        <div class="sonuclar-alani">
            <div class="sonuclar-liste" id="sonuclarListesi"></div>
        </div>

        <div class="bahis-kontrol">
            <div class="bahis-secim">
                <button onclick="ayarlaBahis(-10)">-</button>
                <button style="flex-grow: 2;" id="aktifBahisGosterge">â‚º10.00</button>
                <button onclick="ayarlaBahis(10)">+</button>
            </div>
            <div class="bahis-butonlari">
                <button onclick="setBahis(10)">â‚º10</button>
                <button onclick="setBahis(20)">â‚º20</button>
                <button onclick="setBahis(50)">â‚º50</button>
                <button onclick="setBahis(100)">â‚º100</button>
            </div>
        </div>

        <div class="oyun-butonlari">
            <button id="oynaToplaBtn" onclick="oynaVeyaTopla()">OYNA</button>
            <div class="oto-strateji">
                <div id="otoStratejiSwitch"><div class="slider"></div></div>
                <span style="font-size: 12px;">OTO STRATEJÄ°</span>
            </div>
        </div>
        
        <div class="not">KazanÃ§larda %32 kesinti uygulanÄ±r. Max KazanÃ§: â‚º10.000.000</div>
    </div>
</div>

<script>
    // --- OYUN AYARLARI ---
    const MAX_KAZANC = 10000000.00;
    const GRAFIK_NOKTA_SIKLIGI = 1; 
    let UPDATE_INTERVAL = 200; // 200ms (YavaÅŸ ve net)

    // DeÄŸiÅŸkenler
    let bakiye = 100.00;
    let aktifBahis = 10.00;
    let oyunDurumu = 'bekliyor'; 
    let mevcutCarpan = 1.00;
    let oyunHiziCarpani = 1.0; 
    let animasyonFrameId;
    let sonGuncellemeZamani = 0;
    
    // Matematiksel DeÄŸiÅŸkenler (Volatilite)
    let grafikNoktalari = []; 
    let momentum = 0; // FiyatÄ±n ivmesi (HÄ±z)
    let trendHedefi = 1.5; // FiyatÄ±n gitmek istediÄŸi gizli nokta

    // DOM
    const uiBakiye = document.getElementById('bakiyeGosterge');
    const uiBahis = document.getElementById('aktifBahisGosterge');
    const uiCarpan = document.getElementById('carpanGosterge');
    const uiBtn = document.getElementById('oynaToplaBtn');
    const uiListe = document.getElementById('sonuclarListesi');
    const canvas = document.getElementById('grafikCanvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = canvas.parentElement.clientHeight;
        if(grafikNoktalari.length > 0) drawGraph();
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function updateUI() {
        uiBakiye.textContent = `â‚º${bakiye.toFixed(2)}`;
        uiBahis.textContent = `â‚º${aktifBahis.toFixed(2)}`;
    }

    function setBahis(miktar) { if(oyunDurumu !== 'oynuyor') { aktifBahis = miktar; updateUI(); } }
    function ayarlaBahis(d) { setBahis(aktifBahis + d); }
    function setHiz(x) { 
        oyunHiziCarpani = x; 
        document.querySelectorAll('.hiz-ayarlari button').forEach(b => b.classList.remove('aktif'));
        event.target.classList.add('aktif');
    }

    function oyunuBaslat() {
        if (bakiye < aktifBahis) { alert("Bakiye Yetersiz"); return; }
        
        bakiye -= aktifBahis;
        updateUI();
        
        oyunDurumu = 'oynuyor';
        mevcutCarpan = 1.00;
        grafikNoktalari = [{val: 1.00}]; 
        
        // BaÅŸlangÄ±Ã§ DeÄŸerleri
        momentum = 0.01; // Hafif yukarÄ± baÅŸla
        trendHedefi = 1.50; // Ä°lk hedef

        uiBtn.textContent = "TOPLA";
        uiBtn.classList.add('topla-modu');
        uiCarpan.textContent = "1.00x";
        uiCarpan.className = "carpan-gosterge"; 
        uiCarpan.style.color = "#00ff7f";
        
        sonGuncellemeZamani = performance.now();
        animasyonFrameId = requestAnimationFrame(oyunDongusu);
    }

    function oyunDongusu(zaman) {
        if (oyunDurumu !== 'oynuyor') return;

        let hedeflenenSure = UPDATE_INTERVAL / oyunHiziCarpani;
        
        if (zaman - sonGuncellemeZamani > hedeflenenSure) {
            sonGuncellemeZamani = zaman;
            birAdimIlerle();
        }

        requestAnimationFrame(oyunDongusu);
    }

    function birAdimIlerle() {
        // --- PRO VOLATÄ°LÄ°TE ALGORÄ°TMASI ---
        
        // 1. Rastgele Kuvvet (Piyasa GÃ¼rÃ¼ltÃ¼sÃ¼)
        // -0.02 ile +0.02 arasÄ±nda deÄŸiÅŸir.
        let piyasaGurultusu = (Math.random() - 0.5) * 0.04; 
        
        // 2. Momentum DeÄŸiÅŸimi
        // Momentum aniden deÄŸiÅŸmez, yavaÅŸÃ§a deÄŸiÅŸir (Ä°vme mantÄ±ÄŸÄ±)
        momentum += piyasaGurultusu;
        
        // Momentum SÄ±nÄ±rla (Ã‡ok aÅŸÄ±rÄ± hÄ±zlanmasÄ±n)
        if (momentum > 0.05) momentum = 0.05;
        if (momentum < -0.04) momentum = -0.04; // AÅŸaÄŸÄ± dÃ¼ÅŸÃ¼ÅŸ hÄ±zÄ±
        
        // 3. YerÃ§ekimi (Gravity) - RTP KorumasÄ±
        // Ã‡arpan yÃ¼kseldikÃ§e, aÅŸaÄŸÄ± Ã§ekme kuvveti artar.
        // Ã‡arpan 1.00 altÄ±ndaysa, yukarÄ± itme kuvveti oluÅŸur (Toparlanma ÅŸansÄ±)
        let yerCekimi = 0;
        if (mevcutCarpan > 2.0) yerCekimi = -0.01 * (mevcutCarpan / 2);
        if (mevcutCarpan < 0.8) yerCekimi = 0.015; // Dipten dÃ¶nÃ¼ÅŸ desteÄŸi

        // Yeni DeÄŸeri Hesapla
        let degisim = momentum + yerCekimi;
        let yeniDeger = mevcutCarpan + degisim;
        
        // Min 0.10'a kadar dÃ¼ÅŸebilir (0.00 olamaz oyun sÃ¼rerken)
        if (yeniDeger < 0.10) {
            yeniDeger = 0.10;
            momentum = 0.02; // Dipten sekme efekti
        }
        
        mevcutCarpan = yeniDeger;

        // --- BÄ°TÄ°Åž & CRASH KONTROLLERÄ° ---
        
        // Crash OlasÄ±lÄ±ÄŸÄ± (RTP Dengesi)
        // Ã‡arpan yÃ¼kseldikÃ§e patlama riski artar.
        // Ã‡arpan 1.00 altÄ±ndayken bile patlayabilir (ZararÄ±na kapanÄ±ÅŸ)
        let patlamaRiski = 0.01; // %1 taban risk
        
        if (mevcutCarpan > 1.5) patlamaRiski = 0.03;
        if (mevcutCarpan > 3.0) patlamaRiski = 0.08;
        if (mevcutCarpan > 10.0) patlamaRiski = 0.20;

        // EÄŸer momentum aÅŸaÄŸÄ± ise ve Ã§arpan dÃ¼ÅŸÃ¼kse, "Panic Sell" crash riski
        if (mevcutCarpan < 0.7 && momentum < -0.01) patlamaRiski = 0.05;

        if (Math.random() < patlamaRiski) {
             mevcutCarpan = 0.00; // CRASH!
             oyunuBitir(false);
             return;
        }

        // Max KazanÃ§
        if (mevcutCarpan * aktifBahis > MAX_KAZANC) {
            oyunuBitir(true);
            return;
        }

        // --- VERÄ° KAYDI ---
        grafikNoktalari.push({ val: parseFloat(mevcutCarpan.toFixed(2)) });
        if(grafikNoktalari.length > 50) grafikNoktalari.shift();

        // UI GÃ¼ncelle
        uiCarpan.textContent = mevcutCarpan.toFixed(2) + "x";
        
        if (mevcutCarpan < 1.00) {
            uiCarpan.style.color = "#ffaa00"; // Turuncu (Zarar BÃ¶lgesi)
        } else {
            uiCarpan.style.color = "#00ff7f"; // YeÅŸil (Kar BÃ¶lgesi)
        }

        drawGraph();
    }

    function oyunuBitir(otomatikKazandi) {
        oyunDurumu = 'bitti';
        cancelAnimationFrame(animasyonFrameId);
        
        uiBtn.textContent = "OYNA";
        uiBtn.classList.remove('topla-modu');

        // EÄŸer kullanÄ±cÄ± manuel topladÄ±ysa (otomatikKazandi = true)
        // VE Ã§arpan 1.00 Ã¼zerindeyse kazanÄ±r.
        // EÄŸer Ã§arpan 0.31x ise ve topladÄ±ysa, 3.1 TL alÄ±r (Zarar eder ama kalanÄ±nÄ± kurtarÄ±r)
        
        if (otomatikKazandi || (mevcutCarpan > 0 && mevcutCarpan !== 0.00)) {
            // KazanÃ§/Ä°ade Hesapla
            let geriOdeme = aktifBahis * mevcutCarpan;
            
            // EÄŸer kar ettiyse (carpan > 1) kesinti uygula
            if (mevcutCarpan > 1.00) {
                let kar = geriOdeme - aktifBahis;
                let netKar = kar * 0.68; // %32 kesinti
                geriOdeme = aktifBahis + netKar;
                sonucEkle(mevcutCarpan, true); // YeÅŸil SonuÃ§
            } else {
                // ZararÄ±na bozdurma
                sonucEkle(mevcutCarpan, false); // KÄ±rmÄ±zÄ± SonuÃ§ (Ã‡Ã¼nkÃ¼ zarar)
            }
            
            bakiye += geriOdeme;
            
        } else {
            // Crash Oldu (0.00x)
            mevcutCarpan = 0.00; 
            uiCarpan.textContent = "CRASH";
            uiCarpan.classList.add('crash');
            
            grafikNoktalari.push({ val: 0.00 });
            drawGraph();
            sonucEkle(0.00, false);
        }
        updateUI();
    }

    function oynaVeyaTopla() {
        if(oyunDurumu === 'bekliyor' || oyunDurumu === 'bitti') {
            oyunuBaslat();
        } else if(oyunDurumu === 'oynuyor') {
            // Toplama iÅŸlemi: 1.00x altÄ±nda da toplayabilir (Bakiye kurtarma)
            oyunuBitir(true); 
        }
    }

    function sonucEkle(val, win) {
        const d = document.createElement('div');
        // EÄŸer 1.00 Ã¼stÃ¼ ve win ise yeÅŸil, yoksa kÄ±rmÄ±zÄ±
        let stil = (val >= 1.00 && win) ? 'kazanc' : 'kayip';
        d.className = `sonuc-item ${stil}`;
        
        if (val === 0.00) d.innerText = "CRASH";
        else d.innerText = val.toFixed(2) + 'x';
        
        uiListe.prepend(d);
        if(uiListe.children.length > 20) uiListe.lastElementChild.remove();
    }

    // --- GRAFÄ°K Ã‡Ä°ZÄ°MÄ° ---
    function drawGraph() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (grafikNoktalari.length < 2) return;

        let maxVal = 1.5; 
        grafikNoktalari.forEach(p => { if(p.val > maxVal) maxVal = p.val; });
        maxVal = maxVal * 1.2; 

        const w = canvas.width;
        const h = canvas.height;
        const padding = 30;

        // Ã‡izgi
        ctx.beginPath();
        ctx.lineWidth = 3;
        
        // Ã‡izgi Rengi (AnlÄ±k duruma gÃ¶re)
        if (mevcutCarpan < 1.00) ctx.strokeStyle = "#ffaa00";
        else ctx.strokeStyle = "#00ff7f";
        
        if (grafikNoktalari[grafikNoktalari.length-1].val <= 0.01) ctx.strokeStyle = "#ff4d4d";

        grafikNoktalari.forEach((p, i) => {
            let x = (i / (grafikNoktalari.length - 1)) * w;
            let y = h - ((p.val / maxVal) * (h - padding));
            if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // Kareler
        grafikNoktalari.forEach((p, i) => {
            let x = (i / (grafikNoktalari.length - 1)) * w;
            let y = h - ((p.val / maxVal) * (h - padding));

            if (p.val <= 0.01) ctx.fillStyle = "#ff4d4d";
            else if (p.val < 1.00) ctx.fillStyle = "#ffaa00";
            else ctx.fillStyle = "#00ff7f";

            if (i === grafikNoktalari.length - 1 && oyunDurumu === 'oynuyor') {
                 ctx.fillStyle = "#ffffff"; 
                 ctx.shadowBlur = 10;
                 ctx.shadowColor = "white";
            } else {
                 ctx.shadowBlur = 0;
            }
            ctx.fillRect(x - 4, y - 4, 8, 8);
        });
    }
</script>

</body>
</html>
