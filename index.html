<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KazandÄ±ran FinansÃ§Ä± - Demo</title>
    <style>
        /* CSS BaÅŸlangÄ±cÄ± */
        body {
            font-family: Arial, sans-serif;
            background-color: #0d1e3a; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #fff;
        }
        .oyun-container {
            width: 800px;
            max-width: 95%;
            background-color: #0f274a;
            border: 4px solid #1e90ff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(30, 144, 255, 0.5);
        }

        /* BaÅŸlÄ±k ve Bakiye */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #1e90ff;
        }
        .title {
            font-size: 32px;
            font-weight: bold;
            color: #00ff7f;
            text-shadow: 0 0 5px #00ff7f;
        }
        .bakiye {
            font-size: 24px;
            color: #fff;
            background-color: #0f274a;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #1e90ff;
        }

        /* Grafik AlanÄ± */
        .grafik-alani {
            position: relative;
            height: 350px;
            background-color: #0a1728;
            border: 2px solid #00ff7f;
            border-radius: 8px;
            margin-bottom: 20px;
            background-image: linear-gradient(to right, #1a3d6d 1px, transparent 1px),
                              linear-gradient(to bottom, #1a3d6d 1px, transparent 1px);
            background-size: 50px 50px;
            overflow: hidden;
        }
        .carpan-gosterge {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            color: #00ff7f;
            text-shadow: 0 0 10px #00ff7f;
            z-index: 10;
        }
        #grafikCanvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        /* Alt Kontrol Paneli */
        .kontrol-paneli {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        /* HÄ±z AyarlarÄ± */
        .hiz-ayarlari {
            grid-column: 1 / span 3;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .hiz-ayarlari button {
            background-color: #1e3d6d;
            color: #fff;
            padding: 8px 15px;
            border: 1px solid #1e90ff;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .hiz-ayarlari button:hover {
            background-color: #1a5c96;
        }
        .hiz-ayarlari .aktif {
            background-color: #1e90ff;
            border-color: #fff;
            font-weight: bold;
        }

        /* SonuÃ§lar AlanÄ± */
        .sonuclar-alani {
            background-color: #0a1728;
            border: 2px solid #1e90ff;
            border-radius: 5px;
            padding: 10px;
            height: 150px;
            overflow-y: auto;
        }
        .sonuclar-alani h3 {
            margin-top: 0;
            color: #00ff7f;
            border-bottom: 1px solid #1e90ff;
            padding-bottom: 5px;
        }
        .sonuc-item {
            background-color: #4b0082; /* Mor renk */
            padding: 3px 8px;
            border-radius: 3px;
            display: inline-block;
            margin: 3px;
            font-size: 14px;
        }

        /* Bahis/Oyun TutarÄ± ve Oyna Butonu */
        .bahis-kontrol, .oyun-butonlari {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bahis-butonlari {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
        }
        .bahis-butonlari button {
            background-color: #333;
            color: #fff;
            padding: 10px 0;
            border: 1px solid #666;
            border-radius: 5px;
            cursor: pointer;
        }
        .bahis-secim {
            display: flex;
            gap: 5px;
        }
        .bahis-secim button {
            flex-grow: 1;
            padding: 10px 0;
            font-size: 16px;
            background-color: #1e3d6d;
            border: 1px solid #1e90ff;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }

        #oynaToplaBtn {
            background-color: #00cc66; 
            color: white;
            padding: 20px;
            border: none;
            border-radius: 8px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px #00994d;
            transition: all 0.1s ease;
        }
        #oynaToplaBtn:active {
            box-shadow: 0 2px #00994d;
            transform: translateY(3px);
        }
        /* Topla modundayken rengi deÄŸiÅŸtir */
        #oynaToplaBtn.topla-modu {
            background-color: #ffaa00; /* Turuncu */
            box-shadow: 0 5px #cc8800;
        }
        #oynaToplaBtn.topla-modu:active {
            box-shadow: 0 2px #cc8800;
        }

        .oto-strateji {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        #otoStratejiSwitch {
            width: 60px;
            height: 30px;
            background-color: #333;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.4s;
        }
        #otoStratejiSwitch.on {
            background-color: #1e90ff;
        }
        #otoStratejiSwitch .slider {
            width: 26px;
            height: 26px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.4s;
        }
        #otoStratejiSwitch.on .slider {
            transform: translateX(30px);
        }
        .not {
            grid-column: 1 / span 3;
            font-size: 12px;
            color: #aaa;
            text-align: center;
            margin-top: 10px;
        }
        /* CSS BitiÅŸi */
    </style>
</head>
<body>

<div class="oyun-container">

    <div class="header">
        <div class="title">ðŸš€ KAZANDIRAN FÄ°NANSÃ‡I</div>
        <div class="bakiye" id="bakiyeGosterge">â‚º100.00</div>
    </div>

    <div class="grafik-alani">
        <div class="carpan-gosterge" id="carpanGosterge">1.00x</div>
        <canvas id="grafikCanvas" width="760" height="350"></canvas>
    </div>

    <div class="hiz-ayarlari">
        <span style="font-weight: bold;">HIZ:</span>
        <button data-speed="200">0.25x</button>
        <button data-speed="100">0.50x</button>
        <button class="aktif" data-speed="50">1.00x</button>
        <button data-speed="33">1.50x</button>
        <button data-speed="25">2.00x</button>
    </div>

    <div class="kontrol-paneli">
        <div class="sonuclar-alani" id="sonuclarAlani">
            <h3>SON EN Ä°YÄ° SONUÃ‡LAR</h3>
        </div>

        <div class="bahis-kontrol">
            <div class="bahis-secim">
                <button onclick="ayarlaBahis(-10)">-</button>
                <button style="flex-grow: 2;" id="aktifBahisGosterge">â‚º10.00</button>
                <button onclick="ayarlaBahis(10)">+</button>
            </div>

            <div class="bahis-butonlari">
                <button onclick="setBahis(10)">â‚º10,00</button>
                <button onclick="setBahis(20)">â‚º20,00</button>
                <button onclick="setBahis(30)">â‚º30,00</button>
                <button onclick="setBahis(50)">â‚º50,00</button>
            </div>

            <button style="background-color: #1e3d6d; padding: 10px;">OTO STRATEJÄ° YAP</button>
        </div>

        <div class="oyun-butonlari">
            <button id="oynaToplaBtn" onclick="oynaVeyaTopla()">OYNA</button>

            <div class="oto-strateji">
                <div id="otoStratejiSwitch" class="on">
                    <div class="slider"></div>
                </div>
                <span>OTO STRATEJÄ°</span>
            </div>
        </div>

        <div class="not">
            Tur baÅŸladÄ±ktan sonra dahil olunan oyunlar, kazanÃ§larda %32 kesintiye tabidir.
        </div>
    </div>

</div>

<script>
    // JavaScript BaÅŸlangÄ±cÄ± - YENÄ° VE GELÄ°ÅžTÄ°RÄ°LMÄ°Åž VERSÄ°YON

    const bakiyeGosterge = document.getElementById('bakiyeGosterge');
    const aktifBahisGosterge = document.getElementById('aktifBahisGosterge');
    const oynaToplaBtn = document.getElementById('oynaToplaBtn');
    const carpanGosterge = document.getElementById('carpanGosterge');
    const sonuclarAlani = document.getElementById('sonuclarAlani');
    const canvas = document.getElementById('grafikCanvas');
    const ctx = canvas.getContext('2d');

    let bakiye = 100.00;
    let aktifBahis = 10.00;
    let oyunBasladi = false;
    let mevcutCarpan = 1.00;
    let oyunHiziMs = 50; 
    let oyunInterval;
    let grafikNoktalari = []; 
    let grafikKapasitesi = 100; // Ekranda gÃ¶rÃ¼nen maksimum nokta sayÄ±sÄ±

    const CANVAS_HEIGHT = 350;
    const CANVAS_WIDTH = 760;
    const MAX_GOSTERIM = 10.0; // Y ekseninde maksimum gÃ¶sterilecek Ã§arpan deÄŸeri

    // --- UI ve Bahis YÃ¶netimi ---
    function updateUI() {
        bakiyeGosterge.textContent = `â‚º${bakiye.toFixed(2)}`;
        aktifBahisGosterge.textContent = `â‚º${aktifBahis.toFixed(2)}`;
    }

    function setBahis(tutar) {
        if (oyunBasladi) return;
        aktifBahis = Math.max(10.00, Math.min(100.00, tutar));
        updateUI();
    }

    function ayarlaBahis(delta) {
        if (oyunBasladi) return;
        // Bahis limitlerini kontrol et
        let yeniBahis = aktifBahis + delta;
        yeniBahis = Math.max(10.00, Math.min(100.00, yeniBahis));
        setBahis(yeniBahis);
    }
    
    // --- Grafik Ã‡izimi Fonksiyonu ---
    function cizGrafik() {
        ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);

        if (grafikNoktalari.length < 2) return;

        ctx.beginPath();
        ctx.strokeStyle = '#00ff7f'; 
        ctx.lineWidth = 3;

        const noktaSayisi = grafikNoktalari.length;
        // GrafiÄŸi saÄŸdan sola kaydÄ±rarak Ã§izmek iÃ§in sadece son 100 noktayÄ± al
        const cizilecekNoktalar = grafikNoktalari.slice(Math.max(0, noktaSayisi - grafikKapasitesi));
        const xStep = CANVAS_WIDTH / (grafikKapasitesi - 1 || 1); 

        const yBase = CANVAS_HEIGHT * 0.95; 

        cizilecekNoktalar.forEach((carpan, index) => {
            const x = index * xStep;
            
            const normalizedCarpan = Math.max(1.0, Math.min(MAX_GOSTERIM, carpan));
            
            // Oran: (Ã§arpan - 1) / (maxGosterim - 1)
            const oran = (normalizedCarpan - 1) / (MAX_GOSTERIM - 1);
            
            // Y pozisyonu: Ã‡arpan arttÄ±kÃ§a Y yukarÄ± (kÃ¼Ã§Ã¼k deÄŸerlere) doÄŸru hareket eder.
            const y = yBase - (yBase - (CANVAS_HEIGHT * 0.05)) * oran;

            if (index === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        });

        ctx.stroke();
    }

    // --- Oyun MantÄ±ÄŸÄ± ---

    let momentum = 0.00; // GrafiÄŸin eÄŸilimini korumasÄ±na yardÄ±mcÄ± olur
    function calculateNextCarpan() {
        // Momentumun rastgele deÄŸiÅŸimi (volatilite)
        momentum += (Math.random() - 0.5) * 0.008; 
        // Momentum sÄ±nÄ±rlarÄ± (hafif yÃ¼kseliÅŸ eÄŸilimi iÃ§in Ã¼st limit daha yÃ¼ksek)
        momentum = Math.max(-0.02, Math.min(0.04, momentum)); 

        let nextCarpan = mevcutCarpan + momentum;
        
        // Ã‡arpanÄ± 2 ondalÄ±k basamakta tut
        return parseFloat(nextCarpan.toFixed(2));
    }

    function turuBaslat() {
        if (bakiye < aktifBahis) {
            alert("Yetersiz bakiye!");
            return;
        }

        bakiye -= aktifBahis; // Bahisi dÃ¼ÅŸÃ¼r
        updateUI();

        oyunBasladi = true;
        mevcutCarpan = 1.00;
        grafikNoktalari = [1.00];
        momentum = 0.01; // BaÅŸlangÄ±Ã§ta hafif yukarÄ± eÄŸilim
        oynaToplaBtn.textContent = 'TOPLA';
        oynaToplaBtn.classList.add('topla-modu');
        carpanGosterge.textContent = mevcutCarpan.toFixed(2) + 'x';
        carpanGosterge.style.color = '#00ff7f';
        
        turuCalistir();
    }

    function turuCalistir() {
        let turSayisi = 0; 
        
        oyunInterval = setInterval(() => {
            if (!oyunBasladi) {
                clearInterval(oyunInterval);
                return;
            }

            turSayisi++;
            mevcutCarpan = calculateNextCarpan();

            // Kritik SÄ±fÄ±rlanma (Crash) KontrolÃ¼
            // Ã‡arpan yÃ¼kseldikÃ§e sÄ±fÄ±rlanma olasÄ±lÄ±ÄŸÄ± artar (Risk/Ã–dÃ¼l)
            let crashOlasilik = (mevcutCarpan - 1.0) * 0.005; 
            
            if (Math.random() < crashOlasilik) {
                mevcutCarpan = 0.00;
                grafikNoktalari.push(mevcutCarpan); 
                cizGrafik();
                turuBitir(false); // KayÄ±p
                return;
            }

            // Ã‡arpan 1.00x'in altÄ±na dÃ¼ÅŸebilir, ancak 0.00x'e inmediÄŸi sÃ¼rece oyun devam eder
            
            // UI gÃ¼ncellemesi
            carpanGosterge.textContent = mevcutCarpan.toFixed(2) + 'x';
            carpanGosterge.style.color = mevcutCarpan >= 1.00 ? '#00ff7f' : '#ffaa00'; // Turuncu: DÃ¼ÅŸÃ¼ÅŸte ama kayÄ±p deÄŸil
            
            grafikNoktalari.push(mevcutCarpan);
            cizGrafik();
        }, oyunHiziMs);
    }

    function turuBitir(kazanildi) {
        clearInterval(oyunInterval);
        oyunBasladi = false;
        oynaToplaBtn.textContent = 'OYNA';
        oynaToplaBtn.classList.remove('topla-modu');
        
        let sonucMetni = mevcutCarpan.toFixed(2);
        
        if (kazanildi) {
            const kazanc = aktifBahis * mevcutCarpan * 0.68; // %32 kesinti uygulandÄ±
            bakiye += kazanc;
            sonucMetni = `${mevcutCarpan.toFixed(2)}x (KAZANÃ‡: â‚º${kazanc.toFixed(2)})`;
        } else {
            sonucMetni = "0.00x (KAYIP)";
            carpanGosterge.textContent = "0.00x";
            carpanGosterge.style.color = '#ff4d4d'; // KÄ±rmÄ±zÄ±
        }
        
        ekleSonuc(sonucMetni, kazanildi);
        updateUI();
    }

    function ekleSonuc(sonuc, kazanildi) {
        const yeniSonucDiv = document.createElement('div');
        yeniSonucDiv.classList.add('sonuc-item');
        yeniSonucDiv.textContent = sonuc;
        if (!kazanildi) {
             yeniSonucDiv.style.backgroundColor = '#660000'; 
        } else {
             yeniSonucDiv.style.backgroundColor = '#4b0082'; 
        }

        // H3'ten sonra en Ã¼ste ekle
        sonuclarAlani.insertBefore(yeniSonucDiv, sonuclarAlani.children[1]); 
        
        // Sadece son 20 sonucu gÃ¶ster
        while (sonuclarAlani.children.length > 21) {
            sonuclarAlani.removeChild(sonuclarAlani.lastChild);
        }
    }

    function oynaVeyaTopla() {
        if (oyunBasladi) {
            // TOPLA iÅŸlemi
            if (mevcutCarpan > 1.00) {
                turuBitir(true); 
            } else {
                alert("Toplamak iÃ§in Ã§arpanÄ±n 1.00x'i geÃ§mesi gerekir.");
            }
        } else {
            // OYNA iÅŸlemi
            turuBaslat();
        }
    }

    // --- Olay Dinleyicileri ---
    
    // HÄ±z ButonlarÄ±
    document.querySelectorAll('.hiz-ayarlari button').forEach(button => {
        button.addEventListener('click', function() {
            if (oyunBasladi) return;
            
            document.querySelector('.hiz-ayarlari .aktif').classList.remove('aktif');
            this.classList.add('aktif');
            oyunHiziMs = parseInt(this.dataset.speed);
        });
    });

    // Oto Strateji Switch (Åžimdilik sadece gÃ¶rsel)
    document.getElementById('otoStratejiSwitch').addEventListener('click', function() {
        this.classList.toggle('on');
    });

    // Sayfa YÃ¼klendiÄŸinde
    window.onload = () => {
        updateUI();
        // Canvas boyutlarÄ±nÄ± ayarlama
        // Bu kÄ±sÄ±m, console hatasÄ±nÄ± Ã§Ã¶zmek iÃ§in Ã¶nemlidir. DOM yÃ¼klendiÄŸinde Ã§alÄ±ÅŸÄ±r.
        const grafikAlani = document.querySelector('.grafik-alani');
        canvas.width = grafikAlani.clientWidth - 4; 
        canvas.height = grafikAlani.clientHeight - 4;
        cizGrafik();
    };
    
    // JavaScript BitiÅŸi
</script>

</body>
</html>
